{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { FieldContext } from '.';\nimport warning from \"rc-util/es/warning\";\nimport { HOOK_MARK } from './FieldContext';\nimport { useState, useContext, useEffect, useRef, useMemo } from 'react';\nimport { getNamePath, getValue } from './utils/valueUtil';\nexport function stringify(value) {\n  try {\n    return JSON.stringify(value);\n  } catch (err) {\n    return Math.random();\n  }\n}\n\nfunction useWatch() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  var _args$ = args[0],\n      dependencies = _args$ === void 0 ? [] : _args$,\n      form = args[1];\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      value = _useState2[0],\n      setValue = _useState2[1];\n\n  var valueStr = useMemo(function () {\n    return stringify(value);\n  }, [value]);\n  var valueStrRef = useRef(valueStr);\n  valueStrRef.current = valueStr;\n  var fieldContext = useContext(FieldContext);\n  var formInstance = form || fieldContext;\n  var isValidForm = formInstance && formInstance._init; // Warning if not exist form instance\n\n  if (process.env.NODE_ENV !== 'production') {\n    warning(args.length === 2 ? form ? isValidForm : true : isValidForm, 'useWatch requires a form instance since it can not auto detect from context.');\n  }\n\n  var namePath = getNamePath(dependencies);\n  var namePathRef = useRef(namePath);\n  namePathRef.current = namePath;\n  useEffect(function () {\n    // Skip if not exist form instance\n    if (!isValidForm) {\n      return;\n    }\n\n    var getFieldsValue = formInstance.getFieldsValue,\n        getInternalHooks = formInstance.getInternalHooks;\n\n    var _getInternalHooks = getInternalHooks(HOOK_MARK),\n        registerWatch = _getInternalHooks.registerWatch;\n\n    var cancelRegister = registerWatch(function (store) {\n      var newValue = getValue(store, namePathRef.current);\n      var nextValueStr = stringify(newValue); // Compare stringify in case it's nest object\n\n      if (valueStrRef.current !== nextValueStr) {\n        valueStrRef.current = nextValueStr;\n        setValue(newValue);\n      }\n    }); // TODO: We can improve this perf in future\n\n    var initialValue = getValue(getFieldsValue(), namePathRef.current);\n    setValue(initialValue);\n    return cancelRegister;\n  }, // We do not need re-register since namePath content is the same\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [isValidForm]);\n  return value;\n}\n\nexport default useWatch;","map":{"version":3,"names":["_slicedToArray","FieldContext","warning","HOOK_MARK","useState","useContext","useEffect","useRef","useMemo","getNamePath","getValue","stringify","value","JSON","err","Math","random","useWatch","_len","arguments","length","args","Array","_key","_args$","dependencies","form","_useState","_useState2","setValue","valueStr","valueStrRef","current","fieldContext","formInstance","isValidForm","_init","process","env","NODE_ENV","namePath","namePathRef","getFieldsValue","getInternalHooks","_getInternalHooks","registerWatch","cancelRegister","store","newValue","nextValueStr","initialValue"],"sources":["C:/Capstone_Project/testing/src/main/frontend/node_modules/rc-field-form/es/useWatch.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { FieldContext } from '.';\nimport warning from \"rc-util/es/warning\";\nimport { HOOK_MARK } from './FieldContext';\nimport { useState, useContext, useEffect, useRef, useMemo } from 'react';\nimport { getNamePath, getValue } from './utils/valueUtil';\nexport function stringify(value) {\n  try {\n    return JSON.stringify(value);\n  } catch (err) {\n    return Math.random();\n  }\n}\nfunction useWatch() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  var _args$ = args[0],\n    dependencies = _args$ === void 0 ? [] : _args$,\n    form = args[1];\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    value = _useState2[0],\n    setValue = _useState2[1];\n  var valueStr = useMemo(function () {\n    return stringify(value);\n  }, [value]);\n  var valueStrRef = useRef(valueStr);\n  valueStrRef.current = valueStr;\n  var fieldContext = useContext(FieldContext);\n  var formInstance = form || fieldContext;\n  var isValidForm = formInstance && formInstance._init;\n  // Warning if not exist form instance\n  if (process.env.NODE_ENV !== 'production') {\n    warning(args.length === 2 ? form ? isValidForm : true : isValidForm, 'useWatch requires a form instance since it can not auto detect from context.');\n  }\n  var namePath = getNamePath(dependencies);\n  var namePathRef = useRef(namePath);\n  namePathRef.current = namePath;\n  useEffect(function () {\n    // Skip if not exist form instance\n    if (!isValidForm) {\n      return;\n    }\n    var getFieldsValue = formInstance.getFieldsValue,\n      getInternalHooks = formInstance.getInternalHooks;\n    var _getInternalHooks = getInternalHooks(HOOK_MARK),\n      registerWatch = _getInternalHooks.registerWatch;\n    var cancelRegister = registerWatch(function (store) {\n      var newValue = getValue(store, namePathRef.current);\n      var nextValueStr = stringify(newValue);\n      // Compare stringify in case it's nest object\n      if (valueStrRef.current !== nextValueStr) {\n        valueStrRef.current = nextValueStr;\n        setValue(newValue);\n      }\n    });\n    // TODO: We can improve this perf in future\n    var initialValue = getValue(getFieldsValue(), namePathRef.current);\n    setValue(initialValue);\n    return cancelRegister;\n  },\n  // We do not need re-register since namePath content is the same\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [isValidForm]);\n  return value;\n}\nexport default useWatch;"],"mappings":"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"},"metadata":{},"sourceType":"module"}